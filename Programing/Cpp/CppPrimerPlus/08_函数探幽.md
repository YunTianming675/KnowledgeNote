# 引用变量

## 定义

引用是已定义的变量的别名。例如，将 twain 作为 clement 变量的引用，则可以交替使用 twain 和 clement 来表示该变量。引用为函数处理大型结构提供了一种非常方便的途径，同时对于设计类来说，引用也是必不可少的。

### 创建引用变量

C++ 以 `&` 作为引用运算符，在不同上下文中，它会表示取地址或声明引用变量。例如，将 rodents 作为 rats 的别名：

```c++
int rats = 101;
int &rodents = rats;
```

rats 和 rodents **指向相同的值和内存单元**。

## 引用和指针的不同

1. 引用在声明时必须初始化，指针可以先声明再赋值。

### 左值

左值参数是可被引用的数据对象，例如：变量、数组元素、结构成员、引用和解除引用的指针。非左值包括字面常量（用引号引括起的字符串除外，它们由其地址表示）和包含多项的表达式。常规变量属于可修改的左值，const 变量属于不可修改的左值。

### 临时变量、引用参数和const

如果实参与引用参数不匹配，且参数为 const 引用时，以及以下情况，C++ 将生成临时变量

- 实参的类型正确，但不是左值
- 实参的类型不正确，但可以转换为正确的类型

为什么只有 const 修饰时 C++ 才能创建临时变量，而没有 const 修饰时试图将非左值传递给引用参数将报错？

- 引用参数意味着将可能修改调用函数传递过来的值，而临时变量将阻止这种意图，所以会报错；而如果引用参数只是为了传递值，则临时变量将没有不利的影响。

### 右值引用

在 C++11 中新增了右值引用，这种引用可以指向右值，使用 `&&` 声明。右值引用的目的是让库设计人员提供有些操作更有效的实现。

### 对象、继承和引用

基类引用可以指向派生类对象而无需进行强制类型转换。这种特征可以定义一个接受基类引用作为参数的函数，调用该函数时，可以将基类对象作为参数，也可以将派生类对象作为参数。

## 默认参数

C++ 允许通过函数原型设置形参的默认值，但要注意对于带参数列表的函数，必须从右向左添加默认值，也就是说，要为某个参数设置默认值，则必须为它右边的所有参数提供默认值。并且函数定义可以不设置默认值。

## 函数重载

函数重载的关键是函数的参数列表，也称为函数特征标。如果两个函数的参数数目和类型相同，同时参数的排列顺序也相同，则它们的特征标相同，而变量名是无关紧要的。注意：

- 类型引用和类型本身视为同一个特征标，如

    ```c++
    double cube(double x);
    double cube(double &x);
    ```

    这两个函数原型不能重载。

- 函数的返回值不是特征标

### 名称修饰

C++ 通过函数原型中指定的形参类型对每个函数名进行加密进而跟踪每个重载函数，其具体实现因编译器而异。

# 函数模板

函数模板不能缩短可执行程序，最终编译器将生成对应实际类型的函数定义，就像以手工定义一样，最终的代码不包含任何模板。使用模板的好处是使生成多个函数定义更简单、更可靠。

## 重载的模板

函数模板可以重载，和常规重载一样，被重载的模板的特征标必须不同。